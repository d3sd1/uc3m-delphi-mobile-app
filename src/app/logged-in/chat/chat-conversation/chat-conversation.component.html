<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button (click)="goBack()" text="Volver"></ion-back-button>
    </ion-buttons>
    <ion-title>{{selfChatName()}}</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content #chatMessages>
  <chat-conversation-loading *ngIf="chat == null"></chat-conversation-loading>
  <ion-list *ngIf="chat != null">
    <ion-item *ngFor="let message of chat.chatMessages" [class.my-message]="message.sentBy.id === user.id"
              [slot]="message.sentBy.id === user.id ? 'end':'start'"
              style="width: 50%">
      <ion-thumbnail [slot]="message.sentBy.id === user.id ? 'end':'start'">
        <img [src]="message.sentBy.photo">
      </ion-thumbnail>
      <ion-label>{{message.message}}</ion-label>
    </ion-item>
  </ion-list>
</ion-content>

<ion-item>
  <ion-input (click)="showKeyboard()" (select)="hideKeyboard()" [(ngModel)]="msg" inputmode="email"
             (keypress)="checkEnterKey($event.keyCode)"
             placeholder="Escribe aquÃ­ tu mensaje..."></ion-input>
  <ion-icon (click)="sendMessage()" name="caret-forward-outline" slot="end"></ion-icon>
</ion-item>
